<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>胖可朗 POS 系統</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <header class="main-header">
            <div class="brand"><h1>胖可朗 <span>POS</span></h1></div>
            <button id="mode-status" class="btn-mode" onclick="toggleMode()">點餐模式</button>
        </header>

        <section id="dev-section" class="dev-panel" style="display:none;">
            <div class="dev-grid">
                <div class="dev-card">
                    <h4>🔢 流水號設定</h4>
                    <div class="input-row">
                        <input type="text" id="default-prefix-input" placeholder="前綴">
                        <input type="number" id="serial-num-input" placeholder="序號">
                        <button class="btn-confirm" onclick="saveSerialSettings()">套用</button>
                    </div>
                </div>
                <div class="dev-card">
                    <h4>➕ 新增口味</h4>
                    <div class="input-row">
                        <input type="text" id="new-item-name" placeholder="名稱">
                        <input type="number" id="new-item-price" placeholder="價格">
                        <button class="btn-add" onclick="addMenuItem()">新增</button>
                    </div>
                </div>
            </div>
        </section>

        <div class="main-layout">
            <div class="order-section">
                <div class="customer-card">
                    <span class="label">當前客人</span>
                    <input type="text" id="customer-name-input-main" oninput="manualUpdateName()" placeholder="點擊輸入稱呼...">
                </div>
                <div id="menu-items" class="menu-grid"></div>
            </div>

            <div class="side-section">
                <section class="cart-card">
                    <div class="card-header">
                        <h3>🛒 目前清單</h3>
                        <button class="btn-clear-text" onclick="clearCart()">清空</button>
                    </div>
                    <ul id="cart-list" class="cart-items"></ul>
                    <div class="cart-footer">
                        <div class="total-row">
                            <span>總金額</span>
                            <span class="total-amount">$<span id="total-price">0</span></span>
                        </div>
                        <button class="btn-checkout-big" onclick="checkout()">確認結帳並出單</button>
                    </div>
                </section>

                <section class="history-card">
                    <h3>📋 訂單紀錄 (點擊管理狀態)</h3>
                    <div id="history-list" class="history-container"></div>
                </section>
            </div>
        </div>
    </div>

    <div id="order-modal" class="modal">
        <div class="modal-content">
            <h3 id="modal-item-name">口味</h3>
            <div class="quantity-control">
                <button onclick="changeQty(-1)">-</button>
                <input type="number" id="modal-qty" value="1" readonly>
                <button onclick="changeQty(1)">+</button>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeModal()">取消</button>
                <button class="btn-confirm" onclick="confirmAddToCart()">加入清單</button>
            </div>
        </div>
    </div>

    <div id="edit-item-modal" class="modal">
        <div class="modal-content">
            <h3>編輯口味資料</h3>
            <input type="text" id="edit-item-name">
            <input type="number" id="edit-item-price">
            <div class="modal-footer">
                <button class="btn-delete-name" onclick="confirmDeleteMenu()">刪除</button>
                <button class="btn-confirm" onclick="saveMenuEdit()">更新</button>
            </div>
        </div>
    </div>

    <div id="order-status-modal" class="modal">
        <div class="modal-content">
            <h3>訂單詳細管理</h3>
            <input type="text" id="status-edit-name">
            <textarea id="status-edit-content" rows="3"></textarea>
            <input type="number" id="status-edit-price">
            <div class="modal-footer vertical">
                <button class="btn-confirm" id="btn-toggle-status" onclick="toggleOrderStatus()">切換製作狀態</button>
                <button class="btn-confirm" style="background:#4361ee" onclick="saveOrderEdit()">儲存內容修改</button>
                <button class="btn-delete-name" onclick="deleteOrderRecord()">刪除此紀錄</button>
                <button class="btn-cancel" onclick="closeStatusModal()">關閉</button>
            </div>
        </div>
    </div>

    <button id="cookie-btn" class="cookie-fab" onclick="showLocalStorage()" style="display:none;">🍪</button>

    <script src="script.js"></script>
</body>
</html>